(this["webpackJsonppdf-editor"]=this["webpackJsonppdf-editor"]||[]).push([[0],{100:function(e,t){},101:function(e,t){},102:function(e,t){},114:function(e,t,r){"use strict";r.r(t);var n=r(5),a=r.n(n),i=r(44),s=r.n(i),c=(r(70),r(64)),l=r(21),o=r.n(l),f=r(30),u=r(31),p=r(45),d=r(46),g=r(23),v=r(65),b=r(63),h=(r(71),r(24)),j=r(32),m=r(12);h.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(h.c.version,"/pdf.worker.js");var O=function(e){Object(v.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).state={},n.handleUpload=n.handleUpload.bind(Object(g.a)(n)),n.mergePDFs=n.mergePDFs.bind(Object(g.a)(n)),n}return Object(d.a)(r,[{key:"handleUpload",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var r,n,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=Object(f.a)(t.target.files),e.prev=2,n.s();case 4:if((a=n.n()).done){e.next=15;break}return i=a.value,e.t0=r,e.t1=Uint8Array,e.next=10,i.arrayBuffer();case 10:e.t2=e.sent,e.t3=new e.t1(e.t2),e.t0.push.call(e.t0,e.t3);case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t4=e.catch(2),n.e(e.t4);case 20:return e.prev=20,n.f(),e.finish(20);case 23:this.setState({files:t.target.files,fileBuffers:r.map((function(e){return Array.from(e)})),fileUrls:Array.from(t.target.files).map((function(e){return URL.createObjectURL(e)}))});case 24:case"end":return e.stop()}}),e,this,[[2,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"mergePDFs",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,r,n,a,i,s,l,u,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.PDFDocument.create();case 2:t=e.sent,r=Object(f.a)(this.state.fileBuffers),e.prev=4,r.s();case 6:if((n=r.n()).done){e.next=17;break}return a=n.value,e.next=10,j.PDFDocument.load(new Uint8Array(a));case 10:return i=e.sent,e.next=13,t.copyPages(i,Object(c.a)(Array(i.getPageCount()).keys()));case 13:e.sent.forEach((function(e){return t.addPage(e)}));case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:return e.next=28,t.save();case 28:s=e.sent,l=new Uint8Array(s).buffer,u=new File([l],"merged.pdf",{type:"application/pdf"}),p=URL.createObjectURL(u),this.setState({mergedUrl:p});case 33:case"end":return e.stop()}}),e,this,[[4,19,22,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDragStart",value:function(e,t){e.dataTransfer.setData("id",t)}},{key:"onDrop",value:function(e){var t=this;new Promise((function(r,n){var a=e.dataTransfer.getData("id"),i=Array.from(document.querySelectorAll("[id^='draggable']")),s=i.filter((function(e,t){var r;return e.getBoundingClientRect().top!==(null===(r=i[t-1])||void 0===r?void 0:r.getBoundingClientRect().top)})),c=i.filter((function(e,t){var r;return e.getBoundingClientRect().top!==(null===(r=i[t+1])||void 0===r?void 0:r.getBoundingClientRect().top)}));s.forEach((function(n){var i=n.getBoundingClientRect();if(e.pageX<i.left+20&&e.pageY<i.bottom&&e.pageY>i.top){var s=t.state.fileUrls.slice(0);s.splice(0,0,s[a]),s.splice(parseInt(a)+1,1);var c=t.state.fileBuffers.slice(0);c.splice(0,0,c[a]),c.splice(parseInt(a)+1,1),t.setState({fileUrls:s,fileBuffers:c}),r()}})),c.forEach((function(n){var s=n.getBoundingClientRect();if(e.pageX>s.right&&e.pageY<s.bottom&&e.pageY>s.top){var c=t.state.fileUrls.slice(0);c.splice(i.indexOf(n)+1,0,c[a]),c.splice(parseInt(a),1);var l=t.state.fileBuffers.slice(0);l.splice(i.indexOf(n)+1,0,l[a]),l.splice(parseInt(a),1),t.setState({fileUrls:c,fileBuffers:l}),r()}})),i.forEach((function(r,n){var s=r.getBoundingClientRect();if(e.pageX>s.right&&i[n+1]&&e.pageX<i[n+1].getBoundingClientRect().right&&e.pageY<s.bottom&&e.pageY>s.top){var c=t.state.fileUrls.slice(0);c.splice(n+1,0,c[a]);var l=t.state.fileBuffers.slice(0);l.splice(n+1,0,l[a]),a>n?(c.splice(parseInt(a)+1,1),l.splice(parseInt(a)+1,1)):(c.splice(a,1),l.splice(a,1)),t.setState({fileUrls:c,fileBuffers:l})}}))}))}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("div",{className:"pdfMerged",children:this.state.mergedUrl&&Object(m.jsx)("embed",{src:this.state.mergedUrl,className:"pdfEmbed"})}),Object(m.jsxs)("div",{className:"pdfViewer",children:[Object(m.jsxs)("div",{className:"buttons",children:[Object(m.jsx)("label",{htmlFor:"pdf1",className:"upload",children:"Upload files to merge"}),Object(m.jsx)("input",{type:"file",name:"pdf1",id:"pdf1",accept:"application/pdf",onChange:this.handleUpload,multiple:!0}),Object(m.jsx)("button",{className:"upload",id:"mergeButton",onClick:this.mergePDFs,children:"Merge"})]}),Object(m.jsx)("div",{className:"pdfPreview",onDragOver:function(t){return e.onDragOver(t)},onDrop:function(t){return e.onDrop(t)},children:this.state.fileUrls&&this.state.fileUrls.map((function(t,r){return Object(m.jsx)("div",{id:"draggable".concat(r),draggable:!0,onDragStart:function(t){return e.onDragStart(t,r)},children:Object(m.jsx)(h.a,{file:t,children:Object(m.jsx)(h.b,{pageNumber:1})})},r)}))})]})]})}}]),r}(a.a.Component);s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(O,{})}),document.getElementById("root"))},36:function(e,t){},70:function(e,t,r){},71:function(e,t,r){},98:function(e,t){},99:function(e,t){}},[[114,1,2]]]);
//# sourceMappingURL=main.e526136e.chunk.js.map